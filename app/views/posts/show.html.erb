<% if @post.video.attached? %>
    <p><%= video_tag(rails_blob_path(@post.video), controls: true, style: "max-width: 500px;") %></p>
  <% end %>
  <p><%= @post.title %></p>
  <p><%= @post.description %></p>
  <p><%= @post.industry.name %></p>
  <p><%= link_to "投稿の編集", edit_post_path(@post.id) %></p>
  <p><%= link_to "投稿の削除", post_path(@post.id), data: { turbo_method: :delete } %></p>
  <div id="like-btn<%= @post.id %>">
      <%= turbo_frame_tag dom_id(@post, :like) do %>
        <% if user_signed_in? && @post.liked_by?(current_user)%>
          <%=link_to "いいね済", opinion_likes_path(@post.id), data: { turbo_method: :delete }, class: "btn btn-success", style: "text-decoration: none;", placeholder: "いいね済" %>
        <% else %>
          <%=link_to "いいね", opinion_likes_path(@post.id), data: { turbo_method: :post }, class: "btn btn-outline-success", style: "text-decoration: none;", placeholder: "いいね" %>
        <% end %>
      <% end %>
  </div>

  <div>
    <% if user_signed_in? %>
      <%= form_with(model: [@post, @comment], local: true) do |f| %>
        <%= f.text_area :content, placeholder: "コメントする", rows: "2" %>
        <%= f.submit "送信" %>
      <% end %>
    <% end %>
  </div>
  <div>
    <% @comments.each do |comment| %>
      <%= comment.user.username %>
      <%= comment.content %>
    <% end %>